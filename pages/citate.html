<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Document</title>
    <link rel="stylesheet" href="/assets/CSS/font.css">
    <link rel="stylesheet" href="/assets/CSS/citate.css">
    <link rel="stylesheet" href="/assets/CSS/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/JS/citate.js"></script>
    <script src="/assets/JS/download.js"></script>
    <script src="path/to/dom-to-image.js"></script>
</head>
<body>
    <div class="main">
        <div  id="targetDiv" >
            <div class="picture-weather" id="imgDiv" style="background-image: url(/assets/img/back.jpg);">
                <img src="/assets/img/back-citate.png" id="source" alt="" style="
                z-index: 1;
                position: absolute;
                
                background-size: cover;
                background-position: center;
            
                top: 0;
                left: 0;
                width: 1200px;
                height: 1200px;
                object-fit: cover;
                
                ">
                
                <div class="picture-logo">
                    <div style="padding-top: 80px;"></div>
                    <div class="picture-logo">

                        <div id="top-box">
                            <div id="name">
                                <p id="text-name">Эльвира Набиуллина</p>
                                <p id="line">__________________________</p>
                                <p id="text-post">гений, миллиардер, плейбой, филантроп</p>
                            </div>
                            <div id="photo-box">
                                <img id="people" src="/assets/img/nabi3x4.png" alt="">

                            </div>
                        </div>
                        <div id="bottom-box">
                            <div id="bottom-text-box">
                                <span id="bottom-text">Каждый из нас понимает очевидную вещь: постоянное информационно-пропагандистское обеспечение нашей деятельности не оставляет шанса для приоретизации. </span>
                            </div>
                        </div>
                        <img id="quote-top" src="/assets/img/citate/quote-top-svg.svg" alt="">
                        <img id="quote-bottom" src="/assets/img/citate/quote-top-svg.svg" alt="">
                    </div>
                    
                    
                </div>
                
            </div> 
        </div>
    </div>
    
    <div class="warning">
        Не меняйте размер шрифта ФИ, если по дефолту он вас устраивает
    </div>
    <input type="file" id="fileInput" accept="image/*" class="input-file">
    <button id="btnUpload" class="button file">Замена фотографии</button>
    <script>
        document.getElementById("btnUpload").addEventListener("click", function() {
        document.getElementById("fileInput").click();
        });

        document.getElementById("fileInput").addEventListener("change", function() {
        var file = this.files[0];
        var reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById("people").src = e.target.result;
        }
        reader.readAsDataURL(file);
});
    </script>


    <br>
    <input type="text" id="text-input-name" placeholder="ФИ" class="input-text">
    <button onclick="newTextName()" class="button replace">Заменить текст</button>
    <br>
    <br>
    <label for="" style="font-size: 25px; margin-top: 20px;">Размер шрифта ФИ:</label>
    <input type="range" min="55" max="84" value="12" id="font-range-name"><br>
    <script>
        const fontRangeName = document.getElementById('font-range-name');
        const NameText = document.getElementById('text-name');

        fontRangeName.addEventListener('input', function() {
        const fontSizeName = fontRangeName.value + 'px';
        NameText.style.fontSize = fontSizeName;
        });
    </script>

    <input type="text" id="text-input-post" placeholder="Должность" class="input-text">
    <button onclick="newTextPost()" class="button replace">Заменить текст</button>
    <br>
    <input type="text" id="text-input-bottom" placeholder="Цитата" class="input-text">
    <button onclick="newTextBottom()" class="button replace">Заменить текст</button>
    <br>
    <br>

    <label for="" style="font-size: 25px; margin-top: 20px;">Размер шрифта цитаты:</label>
    <input type="range" min="34" max="56" value="12" id="font-range"><br>
    <script>
        const fontRange = document.getElementById('font-range');
        const bottomText = document.getElementById('bottom-text');

        fontRange.addEventListener('input', function() {
        const fontSize = fontRange.value + 'px';
        bottomText.style.fontSize = fontSize;
        });
    </script>
    
    
    
    <button id="exportBtn" class="button download">Скачать картинку</button>
  
    
    
    <script>
        // Получаем элемент по id
        // var element = document.getElementById("source");

        // Применяем стилевое свойство object-fit
        // element.style.objectFit = "cover";
        // element.style.width = "1200px";
        // element.style.objectFit = "1200px";
        
        
        document.getElementById('exportBtn').addEventListener('click', function() {
        html2canvas(document.getElementById('targetDiv'), {
        onrendered: function(canvas) {
            var img = canvas.toDataURL('image/png');

            
            var link = document.createElement('a');
            link.href = img;
            link.download = 'myImage.png';
            
            
            var event = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
            });
            link.dispatchEvent(event);
        }
    });
});
    </script>


</body>
</html>