<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Document</title>
    <link rel="stylesheet" href="/assets/CSS/font.css">
    <link rel="stylesheet" href="/assets/CSS/dtp.css">
    <link rel="stylesheet" href="/assets/CSS/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/assets/JS/dtp.js"></script>
    <script src="/assets/JS/download.js"></script>
    <script src="path/to/dom-to-image.js"></script>
</head>
<body>
    <div class="main">
        <div  id="targetDiv" >
            <div class="picture-weather" id="imgDiv" style="background-image: url(/assets/img/back-logo-dtp.png);">
                <img src="/assets/img/back-dtp.png" id="source" alt="" style="
                z-index: 1;
                position: absolute;
                
                background-size: cover;
                background-position: center;
            
                top: 0;
                left: 0;
                width: 1200px;
                height: 1200px;
                object-fit: cover;
                
                ">
                <div class="picture-logo">
                    
                    <div class="top-box">
                        <div id="dtp-all-box">
                            <span id="dtp-all">109</span>
                        </div>
                        <div id="for-text-dtp-all">
                            <span id="text-dtp-all">ДТП зарегистрировано <br> в Воронежской области</span>
                        </div>
                    </div>
                    
                  <span style="font-family: 'Golos-text-bold', sans-serif; font-size: 40px; margin-left: 80px; color: white;">____________________________________________________</span>         
                  
                  <div class="box">
                    <div>
                        <div>
                        <span id="dtp-city" class=figure-medium>82</span></div>
                        <span class="text-medium">в Воронеже</span>
                    </div>
                    <div>
                        <div>
                        <span id="dtp-subject" class=figure-medium>17</span></div>
                        <span class="text-medium"id="text-road">в районах <br>области</span>
                    </div>
                    <div>
                        <div>
                        <span id="dtp-road" class=figure-medium>10</span></div>
                        <span class="text-medium" >на трассах</span>
                    </div>
                    
                </div>
                <span style="font-family: 'Golos-text-bold', sans-serif; font-size: 40px; margin-left: 80px; color: white;">____________________________________________________</span>  
                    
                <div class="box">
                        <div>
                            <div>
                            <span class=figure-bottom><span id="dtp-postrad" >7</span> чел.</span></div>
                            <span class="text-bottom">пострадали</span>
                        </div>
                    
                        <div>
                            <div>
                            <span class=figure-bottom><span id="dtp-pogib" >10</span> чел.</span></div>
                            <span class="text-bottom" >погиб</span>
                        </div>


                </div>
            </div> 
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" class="input-file">
    <button id="btnUpload" class="button file">Замена бэкграунда</button> <br>
    <script>
        document.getElementById("btnUpload").addEventListener("click", function() {
        document.getElementById("fileInput").click();
        });

        document.getElementById("fileInput").addEventListener("change", function() {
        var file = this.files[0];
        var reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById("source").src = e.target.result;
        }
        reader.readAsDataURL(file);
});
    </script>


    
    <input type="text" id="text-input-dtp-all" placeholder="За стуки" class="input-text">
    <button onclick="newTextAllDtp()" class="button replace">Заменить текст</button>
    <br>
    
    <input type="text" id="text-input-dtp-city" placeholder="В Воронеже" class="input-text">
    <button onclick="newTextInSity()" class="button replace">Заменить текст</button>
    <br>

    <input type="text" id="text-input-dtp-subject" placeholder="В районах" class="input-text">
    <button onclick="newTextSubject()" class="button replace">Заменить текст</button>
    <br>

    <input type="text" id="text-input-dtp-road" placeholder="На трассах" class="input-text">
    <button onclick="newTextRoad()" class="button replace">Заменить текст</button>
    <br>

    <input type="text" id="text-input-dtp-postrad" placeholder="Пострадало" class="input-text">
    <button onclick="newTextPostrad()" class="button replace">Заменить текст</button>
    <br>
    
    <input type="text" id="text-input-dtp-pogib" placeholder="Погибло" class="input-text">
    <button onclick="newTextPogib()" class="button replace">Заменить текст</button>
    <br>
    
    

    <button id="exportBtn" class="button download">Скачать картинку</button>
    
    
    <script>
        // Получаем элемент по id
        var element = document.getElementById("source");

        // Применяем стилевое свойство object-fit
        element.style.objectFit = "cover";
        element.style.width = "1200px";
        element.style.objectFit = "1200px";
        
        document.getElementById('exportBtn').addEventListener('click', function() {
        html2canvas(document.getElementById('targetDiv'), {
        onrendered: function(canvas) {
            var img = canvas.toDataURL('image/png');

            
            var link = document.createElement('a');
            link.href = img;
            link.download = 'myImage.png';
            
            
            var event = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
            });
            link.dispatchEvent(event);
        }
    });
});
    </script>


</body>
</html>